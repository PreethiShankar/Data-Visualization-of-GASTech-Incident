<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>CSE 578 Project</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
      <script src="https://d3js.org/d3.v5.min.js"></script>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/gh/holtzy/D3-graph-gallery@master/LIB/d3.layout.cloud.js"></script>
</head>
<style>
h1 {
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
  font-weight: bold;
  font-size: 50px;
  color: #000;
  text-align: center;
  margin: 0;
  padding: 20px;
}
#tooltip {
  position: absolute;
  background-color: #f8f9fa;
  padding: 10px;
  border: 1px solid #ced4da;
  font-family: Arial, sans-serif;
  font-size: 12px;
}
</style>
<body>
  <nav class="navbar navbar-expand-lg" style="height:80px; padding: 10px; background-color:#274472;">
  <a class="navbar-brand" href="index.html" style="font-size:25px;color: antiquewhite;" >Mini Challenge 1</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarNav" style="font-size:20px">
    <ul class="navbar-nav" >
      <li class="nav-item">
        <a class="nav-link" href="background.html" style="color: antiquewhite;">Background</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="Data_Processing.html" style="color: antiquewhite;">Data Preprocessing</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="Q1.html" style="color: antiquewhite;">Q1</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="ques2.html" style="color: antiquewhite;">Q2</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="gantt.html" style="color: antiquewhite;">Q3</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="vis.html" style="color: antiquewhite;">Innovative</a>
      </li>
    </ul>
  </div>
</nav>
<div style="width: 100%;">
  <h1 class="text-center bg-light"> Characterization of Biases</h1>
 <div style="background-color:red;height:40px;margin-left:20px;margin-right: 20px;"></div>
<div class="bg-light">
  <svg width="1400" height="400"></svg>
</div>
</div>
  <div class="row">
  <div class="col-sm-2"></div>
  <div class="col-sm-8">

        <center>

<div id="tooltip" style="display: none;"></div>
<h5> Choose Cluster</h5>
     <select class="form-select form-select-lg mb-3 bg-light" aria-label=".form-select-lg example" style="width:50%;text-align: center;" id="cluster">
        <option value="Cluster_0">Cluster 1</option>
        <option value="Cluster_1">Cluster 2</option>
        <option value="Cluster_2">Cluster 3</option>
        <option value="Cluster_3">Cluster 4</option>
        <option value="Cluster_4">Cluster 5</option>

    </select>
<h5> Choose Visualization</h5>

    <select class="form-select form-select-lg mb-3 bg-light" aria-label=".form-select-lg example" style="width:50%;text-align: center;" id="vis">
        <option value="wc">Word Cloud</option>
        <option value="bigram">Bigram and Trigram</option>
    </select>
<br>
    <button class="btn btn-success text-light" onclick="submitVariables()"> View </button>
    <br>
    <br>
    
</center>

  </div>
</div>

<div class='container jumbotron text-center'>
    <h2 class="bg-light">The Evolution of events over time</h2>
    <center>
          <a class="btn btn-success text-light" href="lollipop.html">Timeline of Events </a>

    </center>
  </div>

  <script>
    function submitVariables() {

  // Get the selected option from the dropdown menu
  // Get the values of the input fields
      var dropdown = document.getElementById("cluster");
  var var1 = document.getElementById("cluster").options[dropdown.selectedIndex].value;
   dropdown = document.getElementById("vis");
  var var2 = document.getElementById("vis").options[dropdown.selectedIndex].value;
  

  var clusterColors = {
  "Cluster_0": "blue",
  "Cluster_1": "hsl(50, 80%, 50%)",
  "Cluster_2": "red",
  "Cluster_3": "green",
  "Cluster_4": "purple"
};
var var3=clusterColors[var1];

  // Encode the variables as query parameters in the URL
  var url = "q2extended.html?var1=" + encodeURIComponent(var1) + "&var2=" + encodeURIComponent(var2) + "&var3=" + encodeURIComponent(var3);

  // Redirect to the next page with the variables in the URL
    window.location.href = url;

}

    var data = [

//{cluster:"", label: "Athena Speaks"},

{cluster:"0", label: "Daily Pegasus"},
{cluster:"0", label: "Homeland Illumination"},
{cluster:"0", label: "News Online"},
{cluster:"0", label: "The Orb"},
{cluster:"0", label: "The Wrap"},
{cluster:"0", label: "All News Today"},
{cluster:"1", label: "The Abila Post"},
{cluster:"1", label: "The Explainer"},
{cluster:"1", label: "Central Bulletin"},
{cluster:"1", label: "News Desk"},
{cluster:"2", label: "Everyday News"},
{cluster:"2", label: "International Times"},
{cluster:"2", label: "The Continent"},
{cluster:"2", label: "World Journal"},
{cluster:"2", label: "World Source"},
{cluster:"3", label: "International News"},
{cluster:"3", label: "Kronos Star"},
{cluster:"3", label: "The Guide"},
{cluster:"3", label: "The Truth"},
{cluster:"3", label: "Worldwise"},
{cluster:"4", label: "The General Post"},
{cluster:"4", label: "The Light of Truth"},
{cluster:"4", label: "The Tulip"},
{cluster:"4", label: "The World"},
{cluster:"4", label: "Who What News"}
//{cluster:"", label: "Centrum Sentinel"},
//{cluster:"", label: "Modern Rubicon"},
//{cluster:"", label: "Tethys News"},


    ];
      var sentences = [

      {Key:0, sentence: "Focus mainly on the hazardous impacts of GASTech and the rise of POK."},
      {Key:1, sentence: "Focus on the rise of POK and its Grassroot movement that started from Elodis, the agricultural town that is 25 km from Abila"},
      {Key:2, sentence: "Focus on the health and environmental hazards of GASTech by frequent usage of words like drugs, cotton and medical"},
      {Key:3, sentence: "Focuses on GASTech as a company by making references to the CEO Sten Sanjorge and also focus on POK by making references to the president Kapelou"},
      {Key:4, sentence: "Focus mainly on GASTech as company and talks about the kidnapping of GASTech employees"}

    ];
        console.log(data)
      // Define colors for clusters
      //var colors = d3.scaleOrdinal(d3.schemeCategory10);
      var colors = {0:"blue", 1: "hsl(50, 80%, 50%)",  2:"red", 3:"green", 4:"purple"}

      var clusters = {
  0: "Data/Cluster_0/index.html",
  1: "Data/Cluster_1/index.html",
  2: "Data/Cluster_2/index.html",
  3: "Data/Cluster_3/index.html",
  4: "Data/Cluster_4/index.html"
};

      // Set up SVG element
      var svg = d3.select("svg");

      // Set up circles for each cluster
      var clusters = d3.nest()
        .key(function(d) { return d.cluster; })
        .entries(data);

      var circles = svg.selectAll(".circle")
        .data(clusters)
        .enter().append("g")
        .attr("transform", function(d, i) { return "translate(" + (i * 280 +150) + ",200)"; });
     

      var tooltip = d3.select("#tooltip");

// ... (rest of the code for creating the lollipop chart)

// Add tooltip on mouseover
circles.append("circle")
  .attr("r", 120)
  .attr("fill", "white")
  .attr("stroke", function(d) { return colors[d.key]; })
  .on("mouseover", function(d) {
    // Get the data for the current circle
    var data = d3.select(this).data()[0];
console.log(sentences[data.key]);
    // Update the content and position of the tooltip
    tooltip.html(sentences[data.key].sentence)
      .style("left", (d3.event.pageX + 10) + "px")
      .style("top", (d3.event.pageY + 10) + "px")
      .style("display", "block");
    d3.select(this).attr("stroke-width", 5);
  })
  .on("mousemove", function() {
    // Update the position of the tooltip based on mouse pointer
    tooltip.style("left", (d3.event.pageX + 10) + "px")
      .style("top", (d3.event.pageY + 10) + "px");
  })
  .on("mouseout", function() {
    // Hide the tooltip
    tooltip.style("display", "none");
    d3.select(this).attr("stroke-width", 1);
  });




      /*  .on("click", function(d) {
            // Use d3.select(this) to select the clicked circle
            var clickedCircle = d3.select(this);
           // Toggle the fill attribute between "none" and the desired color
            clickedCircle.attr("fill", function(d) { return colors[d.key]; });
            
  });*/

      circles.append("text")
        .text(function(d,i) { return "Cluster: " + (i + 1) })
        .attr("text-anchor", "middle")
        .style("fill",   function(d) { return colors[d.key]; })
        .style("font-size","15px")
        .style("font-weight", "light")
        .attr("y",0 );

      // Set up small circles and labels
      var nodes = circles.selectAll(".node")
        .data(function(d) { return d.values; })
        .enter().append("g")
        .attr("class", "node")
        .attr("transform", function(d, i) {
          var angle = i * (2 * Math.PI / d3.select(this.parentNode).datum().values.length);
          var radius = 90;
          var newX = radius * Math.cos(angle);
          var newY = radius * Math.sin(angle);
          return "translate(" + newX + "," + newY + ")";
        });

      nodes.append("circle")
        .attr("r", 20)
        .attr("fill",   "white" )
        .attr("stroke",function(d) { return colors[d.cluster]; })
        
       

      nodes.append("text")
        .text(function(d) { return d.label; })
        .attr("text-anchor", "middle")
        .style("font-color", "black")
        .style("font-size","10px")
        .style("font-weight", "light")
        .attr("y", 0);

  </script>

</body>
</html>
